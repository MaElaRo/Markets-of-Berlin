<div id='map' style='width: auto; height: 86vh'></div>

  
<script>
  //initial map settings
  mapboxgl.accessToken = 'pk.eyJ1IjoiYW5nbWluc2hlbmciLCJhIjoiY2pydDhjMjlwMXhpaDN5cHMxcjNya2ZmbyJ9.Tc5kmo0vZ1VKJbLK83OloA';
  var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/light-v10',
    center: [13.405, 52.52],
    zoom: 11.15,
  });

   
  // from Alican

  const markets = {{{ JSON markets }}}
  markets.forEach(market => {
    let popup = new mapboxgl.Popup({ offset: 0, className: 'my-class' })
      .setHTML(`<div class="popup"><p>${market.marketname}</p><p>${market.description}</p><img src="${market.market.marketImg}" alt=""></div>`)
      .setMaxWidth("none")

      var el = document.createElement('div');
      el.className = 'marker';
      el.style.backgroundImage = `url(/images/${market.market.marketType.toLowerCase().replace(" ","")}.png)`
      el.style.width = '50px';
      el.style.height = '47px';

    let marker = new mapboxgl.Marker()
      .setLngLat(market.location.coordinates)
      .setPopup(popup)
      .addTo(map)
  })

  
  
  </script>

  // adding controls to the map

 

</body>

</html>



</script>